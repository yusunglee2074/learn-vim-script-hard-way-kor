# 제한된 맵핑

준비하세요. 이제부터는 조금 거칠어질꺼에요.

우리는 `map`, `nmap`, `vmap` 그리고 `imap`을 맵핑을 만들어 시간을 아끼기 위해 사용했습니다. 사실 이것들은 단점이 있습니다. 아래 커맨드를 입력해보세요.

    :nmap - dd
    :nmap \ -

노멀모드에서 `\`키를 눌러보세요. 어떤일이 벌어지나요?

`\`키를 눌렀을 때 빔은 맵핑을 쳐다봅니다. 그리고 `-`키를 실행합니다. 하지만 우리는 이미 `-`키에 다른 무언가를 맵핑을 했습니다. 빔은 또 다시 알아차리고 `dd`를 실행합니다.

빔은 해당 키에 이미 다른 기능이 맵핑되 있어도 그 키를 다시 맵핑 될 키로 설정할 수 있습니다.이것은 처음에는 꽤 괜찮게 들릴지 몰라도 나중에 가면 이건 악마와도 같을 것 입니다. 왜그럴까요? 먼저 위에 설정했던 키 맵핑을 삭제하기 위해 아래 커맨드를 실행시키세요.

    :nunmap -
    :nunmap \

# 재귀

아래 커맨드를 입력해보세요.

    :namp dd O<esc>jddk

언틋 보기에 일단 `dd`키에 아래 기능들을 할당 한 것 같습니다.

  * 커서 위에 새로운 줄을 만들고
  * 노말모드로 빠져나옵니다.
  * 위 쪽으로 커서를 한 줄 이동 후
  * 현재줄을 지우고 
  * 다시 아래쪽으로 커서를 한 줄 내립니다.

현재 줄을 지우란걸 조금 길게 써놓은 것 같습니다. 실행시켜보세요.
빔이 멈춰보일 수 있습니다. 재귀적인 표현에 무한 루프에 빠진것 입니다. `<c-c>`키를 눌러서 빠져나올 수 있습니다. 어떤일이 벌어진거죠?

우리가 했던 맵핑은 재귀적입니다. `dd`키를 눌렀을 때 이런 일이 벌어집니다.

* `dd` 키가 맵핑되었고, 맵핑 값을 실행합니다.
    * 커서 위에 빈 줄을 만듭니다.
    * 삽입모드를 빠져나옵니다.
    * `dd`는 커스텀 맵핑 키 입니다. 맵핑 값을 실행합니다.
            * 커서 위에 빈 줄을 만듭니다.
            * 삽입모드를 빠져나옵니다.
            * `dd`는 커스텀 맵핑 키 입니다. 맵핑 값을 실행합니다.

이러한 작업은 절대 끝나지 않습니다. 이 끔찍한 맵핑을 삭제하세요.

    :nonmap dd

# 사이드 효과

`*map`커맨드의 단점은 재귀의 가능성이 있습니다. 또다른 하나는 이들의 행동이 바뀔수도 있습니다. 만약 커맨드에 어떤 다른 행동을 맵핑하는 플러그인을 사용한다면 말이죠.

만약 새로운 플러그인을 설치할때 당신은 그것이 만들어낸 새로운 모든 맵핑들을 사용하진 않거나 외우지 않을 가능성이 큽니다. 만약 그렇다면 당신의 `.vimrc`파일로 가서 당신의 커스텀 맵핑이 위의 `dd`와 같이 당신의 의도하지 않은 기능으로 바뀌어버리진 않는지 살펴봐야합니다.

# Nonrecursive Mapping

빔은 또다른 맵핑 커맨드를 제공합니다. 이러한 맵핑은 맵핑속에 있는 커맨드들은 커스텀 맵핑이 적용되지 않습니다. 아래 커맨드를 실행하세요.

    :nmap x dd
    :nnoremap \ x

이제 `\`키를 눌러보고 무슨일이 일어나는지 보세요.

당신이 `\`키를 눌렀을 떄 빔은 `x`에 대한 커스텀 맵핑을 `x`를 무시하고 빔 기본 기능으로 할당 됩니다. 

각각의 `*map` 커맨드는 `*noremap` 커맨드를 갖고 있습니다. 커스텀 맵핑을 무시하죠.

그러면 비재귀적인 커맨드 할당을 언제 사용해야할까요?

**언제나**

** 장난아니고 진짜 __언제나__**

기존의 `*map`은 추 후 새로운 플러그인을 설치하거나 새로운 커스텀 맵피을 할 때 고통을 줄여주는 데 사용됩니다. 의도하지 않은 문제가 생기지 않도록 `*noremap`커맨드를 사용하세요.

## 연습

`.vimrc`에 추가했던 모든 명령어들을 비재귀적인 커맨드로 바꾸세요.
그리고 `:help unmap`을 읽어보세요.

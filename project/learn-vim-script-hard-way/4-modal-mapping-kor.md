# Modal Mapping

지난번에 키를 맵핑하는 법을 배웠었습니다. `map`커맨드를 사용해서 노말모드에서 작동하게 만들었습니다. 언급하지 않았지만 노말모드 뿐만아니라 비쥬얼모드에서도 작동합니다.

`nmap`, `vmap`, `imap` 커맨드를 사용해서 언제 해당 키들이 작동하는지 특정할 수 있습니다. 이것들은 빔에게 노말모드(Normal), 비쥬얼모드(Visual), 삽입모드(Insert) 각각에서만 맵핑 할 수 있게 해줍니다.

아래 커맨드를 실행해보세요.

    :nmap - dd

텍스트 위에 커서를 두고, 노멀모드 상태에서 `-` 버튼을 눌러보세요. 그 줄이 삭제 될 것입니다.

비쥬얼모드에서도 `-`키를 눌러보세요. 아무것도 일어나지 않습니다. 빔에게 노멀모드에서만 작동하도록 키를 맵핑했기 때문입니다.

아래 커맨드를 실행해보세요.

    :vmap - U

비쥬얼모드 상태에서 텍스트(영문) 위에 커서를 두고 `-`키를 눌러보세요. 텍스트를 대문자 화 할 것입니다.

`-`키는 각각 노말모드, 비쥬얼모드에서 다른 기능을 갖게 됩니다.

## Muscle Memory

각각의 다른모드에서 같은 키에 다른 기능을 맵핑하는 것은 끔찍한 소리처럼 들립니다. 키를 누르기전에 지금 있는 모드가 어떤 모드인지 생각 할 필요는 무엇입니까? Wouldn't that negate any time you save from the mapping itself?

이것은 그렇게 문제가 되지 않습니다. 빔을 사용하기 시작하면 당신은 각각의 키에 대해 생각하지 않을 것 입니다. 당신은 '줄을 지워야지' 라고 생각하지 'dd를 눌러야지' 라고 생각하지 않습니다. 당신의 손가락과 뇌가 당신의 맵핑을 배워갈 것이고 `dd`와 같은 키들은 잠재의식속에 있을 것 입니다.

## Insert Mode

지금까지 우리는 비쥬얼, 노말 모드에서 키를 맵핑하는 법을 다뤘습니다. 입력 모드로 옮겨가 봅시다. 아래 커맨드를 실행하세요.

    :imap <c-d> dd

당신은 아마도 입력모드 에서 `Ctrl + d`를 누르면 한 줄이 사라질 것이라 예측 할 것입니다. 이것은 입력모드에서 줄을 지울 때 노말 모드로 돌아가지 않아도 되므로 편할 것입니다!

벌써 사용해 보셨나요? 작동이 안 됩니다. -- 그저 `dd`만을 추가할 뿐이죠. 필요없는 기능이네요....

문제점은 빔은 당신이 작성한 그대로 행동한다는 것 입니다. 우리는 `<c-d>`를 누르면 빔이 `dd`를 누름으로써 노말모드에서와 같이 한 줄을 지우는 기능을 원했습니다. 음...일반적으로 삽입모드에 있을때 `d`키를 두번 누르면 `dd`를 얻겠죠.

의도한데로 작동하게 하려면 아주 정교해질 필요가 있습니다. 아래 커맨드를 입력해서 기존의 맵핑을 덮어씌우세요.

    :imap <c-d> <esc>dd

`<esc>`는 빔에게 `ESC`키를 입력하라고 명령합니다. 이 키는 입력모드에서 노말모드로 돌아오는 키죠.

맵핑한 키를 작동시켜 보세요. 작동합니다, 하지만 명령이 끝났을때에는 노말모드입니다. 다시 입력모드로 돌아오라는 이야기를 안 했으니깐요.

아래 커맨드를 입력해서 다시한번 덮어씌웁시다.

    :imap <c-d> <esc>ddi

완성~

## 연습

당신이 입력모드에서 `<c-u>`를 누르면 현제 단어를 대문자화 하는 맵핑을 작성해보세요.
비쥬얼 모드에서 `U`는 선택한 것을 대문자화 하는 것을 기억하세요. 저는 이 맵핑을 정말 유용하게 쓰고있습니다. 이름을 적거나 긴 단어를 대문자화 할 때 말이죠. 소문자로 전부 치고 난 후 이 맵핑을 이용해서 대문자화 합니다. 쉬프트키를 하루종일 누를 필요 없이 말이죠.

유용하다고 생각하시면 맵핑을 당신의 `.vimrc`파일에 추가하세요.

당신이 노말모드에서 `<c-u>`를 누르면 대문자화 하는 맵핑을 작성해보세요. 이것은 위의 연습과 조금 다를 것 입니다. 노말모드에 들어올 필요가 없기 때문입니다. 대문자화 후 노말모드에서 끝나야겠죠?

역시 유용하다면 추가하세요.

